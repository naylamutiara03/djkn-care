<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/png" href="img/logo-djkn.png">
    <title>Isi Piringku - DJKN CARE</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

    <style>
        /* Warna utama dan latar belakang sesuai gambar */
        :root {
            --color-primary: #006838;
            /* Hijau Tua */
            --color-secondary: #8cc342;
            /* Hijau Muda */
            --color-bg: #badc84;
            /* Hijau Latar Belakang */
            --color-section-bg: #e8f5e9;
            /* Latar Belakang Bagian Konten */
        }

        /* --- Layout dasar --- */
        body {
            background-color: var(--color-bg);
            /* Latar belakang hijau */
            color: #333;
        }

        /* Navbar */
        .brand-logo {
            height: 60px;
        }

        .brand-text {
            font-size: 1.8rem;
            font-weight: 700;
        }

        .back-link {
            text-decoration: none;
            color: inherit;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* Container utama */
        .main-content-container {
            padding-top: 20px;
            padding-bottom: 40px;
            max-width: 1000px;
        }

        /* Kartu Bahan Makanan */
        .food-section-card {
            background-color: var(--color-section-bg);
            border-radius: 12px;
            margin-bottom: 20px;
            padding: 20px 15px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .section-header {
            padding: 0;
            border-radius: 8px;
            margin-bottom: 10px;
            font-size: 1.4rem;
            font-weight: 700;
            display: inline-block;
        }

        .food-item {
            text-align: center;
            padding: 10px 5px;
            /* Kurangi padding horizontal */
        }

        .food-item img {
            height: 70px;
            /* Ukuran gambar item makanan */
            margin-bottom: 5px;
            display: block;
            margin-left: auto;
            margin-right: auto;
        }

        .food-item p {
            font-size: 0.9rem;
            margin: 0;
            font-weight: 500;
        }

        /* Bagian Kebutuhan Harian */
        .daily-need-bar {
            background-color: var(--color-primary);
            color: white;
            padding: 8px 15px;
            border-radius: 8px;
            font-weight: 600;
            margin-bottom: 20px;
            margin-top: 10px;
            font-size: 0.95rem;
        }

        /* Top Section: Diubah agar transparan (Tanpa Background Putih) */
        .top-plate-section {
            background-color: transparent;
            /* Menghapus background putih */
            padding: 20px 0;
            margin-bottom: 30px;
            /* Box shadow dihapus agar tidak terlihat kotak putih samar */
            box-shadow: none;
        }

        /* Wadah utama piring dan panah */
        #plateVisualWrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            width: 100%;
        }

        /* Ukuran piring di layar besar */
        .plate-image {
            width: 100%;
            max-width: 320px;
            /* Ukuran piring kanan */
            height: auto;
        }

        /* --- Perbaikan Layout Piring Responsif --- */
        .dual-plate-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            width: 100%;
            margin: 0 auto;
        }

        /* Panah Default (Layar Besar) */
        .plate-arrow {
            width: 60px;
            height: auto;
            flex-shrink: 0;
        }

        .plate-image.mpasi-main {
            max-width: 420px;
            /* Piring kiri sedikit lebih besar */
        }

        /* Pengaturan Gambar ASI di bawah */
        .asi-image {
            max-width: 400px;
            width: 90%;
            height: auto;
            margin-top: 20px;
        }

        /* Gambar default saat reset */
        .plate-composition-img {
            max-width: 500px;
            width: 100%;
            height: auto;
        }

        /* Gaya untuk tombol reset (menghilangkan garis pemisah) */
        .dropdown-divider {
            display: none !important;
            /* Hapus garis pemisah */
        }

        #resetPlateBtn {
            background-color: transparent !important;
            color: var(--color-primary) !important;
            font-weight: 700 !important;
        }

        #resetPlateBtn:hover,
        #resetPlateBtn:focus {
            background-color: var(--color-section-bg) !important;
            color: var(--color-primary) !important;
        }

        /* Responsive */
        @media (max-width: 768px) {

            /* Untuk Tablet (md) */
            .plate-image {
                max-width: 200px;
            }

            .plate-image.mpasi-main {
                max-width: 250px;
                /* Piring 1 tetap sedikit lebih besar */
            }

            .asi-image {
                max-width: 250px;
                /* Gambar ASI di Tablet */
            }
        }

        /* --- Pengaturan Khusus Layar HP --- */
        @media (max-width: 576px) {
            .dual-plate-container {
                flex-direction: column;
                /* Tumpuk piring secara vertikal */
                gap: 10px;
            }

            /* Piring di HP tetap besar (memenuhi 90% lebar layar) */
            .plate-image.mpasi-main,
            .plate-image {
                max-width: 90%;
                width: 280px;
                /* Ukuran minimum agar tetap jelas */
            }

            /* Panah di HP otomatis menghadap ke bawah */
            .plate-arrow {
                width: 50px;
                transform: rotate(90deg);
                margin: 15px 0;
            }

            .asi-image {
                max-width: 80%;
                margin-top: 10px;
            }
        }

        /* Kembalikan cursor pointer untuk dropdown usia */
        #usiaDropdown,
        .dropdown-menu .dropdown-item {
            cursor: pointer !important;
            user-select: none;
        }
    </style>
</head>

<body>

    <nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top shadow-sm">
        <div class="container">

            <div class="d-flex align-items-center">
                <a href="index.html" class="me-3 back-link" title="Kembali">
                    <i class="bi bi-arrow-left" style="font-size:1.4rem; color:var(--color-primary)"></i>
                </a>

                <a class="navbar-brand d-flex align-items-center" href="index.html">
                    <img src="img/logo-djkn.png" alt="DJKN Logo" class="brand-logo me-2">
                    <span class="brand-text"><span style="color:var(--color-primary)">DJKN</span><span
                            style="color:var(--color-secondary)">-CARE</span></span>
                </a>
            </div>

            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarTop">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarTop">
                <ul class="navbar-nav ms-auto align-items-lg-center mt-3 mt-lg-0">
                    <li class="nav-item dropdown me-lg-3">
                        <button id="usiaDropdown" class="btn btn-success dropdown-toggle"
                            style="background-color:var(--color-primary); border-color:var(--color-primary);"
                            data-bs-toggle="dropdown" aria-expanded="false">
                            Pilih Usia
                        </button>
                        <ul class="dropdown-menu dropdown-menu-end shadow-sm rounded-3">
                            <li><a class="dropdown-item" data-age="12-24">Usia 12â€“23 Bulan</a></li>
                            <li><a class="dropdown-item" data-age="2-5">Usia 2â€“5 Tahun</a></li>
                            <li>
                                <hr class="dropdown-divider">
                            </li>
                            <li><a class="dropdown-item text-danger fw-semibold" id="resetPlateBtn">Reset Piring</a>
                            </li>
                        </ul>
                    </li>
                </ul>
            </div>

        </div>
    </nav>

    <div class="container main-content-container">
        <h2 class="text-center" style="color:var(--color-primary);">Rencanakan Piring Sehatmu!</h2>
        <p class="lead text-center" id="usia-indicator">Silakan pilih usia untuk melihat komposisi piring.</p>

        <div class="top-plate-section text-center">
            <div id="plateVisualWrapper">
            </div>
            <p class="text-secondary mt-3 mb-0" style="font-weight: 600;" id="plateNote"></p>
        </div>

        <div id="foodCategoriesContainer" class="d-none">

            <div class="food-section-card">
                <div class="text-center">
                    <img class="section-header" src="img/protein.png" width="200" alt="Protein">
                </div>
                <div class="daily-need-bar text-center">
                    Kebutuhan Harian Balita
                </div>
                <div class="row"></div>
            </div>

            <div class="food-section-card">
                <div class="text-center">
                    <img class="section-header" src="img/karbohidrat.png" width="200" alt="Karbohidrat">
                </div>
                <div class="daily-need-bar text-center">
                    Kebutuhan Harian Balita
                </div>
                <div class="row"></div>
            </div>

            <div class="food-section-card">
                <div class="text-center">
                    <img class="section-header" src="img/lemak.png" width="200" alt="Lemak">
                </div>
                <div class="daily-need-bar text-center">
                    Kebutuhan Harian Balita
                </div>
                <div class="row"></div>
            </div>

            <div class="food-section-card">
                <div class="text-center">
                    <img class="section-header" src="img/serat.png" width="200" alt="Serat">
                </div>
                <div class="daily-need-bar text-center">
                    Kebutuhan Harian Balita
                </div>
                <div class="row"></div>
            </div>

            <div class="food-section-card">
                <div class="text-center">
                    <img class="section-header" src="img/air-judul.png" width="200" alt="Cair">
                </div>
                <div class="daily-need-bar text-center">
                    Kebutuhan Harian Balita
                </div>
                <div class="row"></div>
            </div>
        </div>

    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Data sederhana untuk simulasi perubahan konten

        // ðŸŸ¢ Variabel Gambar Piring (Disesuaikan dengan permintaan baru)
        const plate12to24Img1 = 'img/piring1(12-24).png';
        const plate12to24Img2 = 'img/piring2(12-24).png';
        const rightArrowImg = 'img/right-arrow.png';
        const asiImg = 'img/asi.png';

        // ðŸ”´ Variabel gambar baru untuk usia 2-5 tahun (Permintaan dari user)
        const plate2to5Img1 = 'img/piring1(2-5).png';
        const plate2to5Img2 = 'img/piring2(2-5).png';
        const emptyPlateImg = 'img/isi-piring-removebg.png';

        // Data Kebutuhan Harian (teks indikator utama)
        const dailyNeeds = {
            "default": "Silakan pilih usia untuk melihat komposisi piring.",
            "12-24": "Kebutuhan Harian Balita 12â€“23 Bulan",
            "2-5": "Kebutuhan Harian Balita 2â€“5 Tahun"
        };

        // Data kebutuhan harian per kategori (teks di daily-need-bar)
        const categoryNeeds = {
            "Protein": {
                "12-24": "Contoh Bahan Makanan",
                "2-5": "Contoh Bahan Makanan"
            },
            "Karbohidrat": {
                "12-24": "Contoh Bahan Makanan",
                "2-5": "Contoh Bahan Makanan"
            },
            "Lemak": {
                "12-24": "Contoh Bahan Makanan",
                "2-5": "Contoh Bahan Makanan"
            },
            "Serat": {
                "12-24": "Contoh Bahan Makanan",
                "2-5": "Contoh Bahan Makanan"
            },
            "Cair": {
                "12-24": "Contoh Bahan Makanan",
                "2-5": "Contoh Bahan Makanan"
            }
        };

        // ðŸŸ¢ Data Makanan Terperinci per Usia 
        const dailyFoodItems = {
            "Protein": {
                "12-24": [
                    { img: "img/dada-ayam.png", alt: "Ayam", text: "Ayam 60 gr<br>(6 sdm)" },
                    { img: "img/hati-ayam.png", alt: "Hati Ayam", text: "Hati Ayam 55 gr<br>(5.5 sdm)" },
                    { img: "img/ikan.png", alt: "Ikan", text: "Ikan 60 gr<br>(6 sdm)" },
                    { img: "img/daging.png", alt: "Daging Sapi", text: "Daging Sapi 50 gr<br>(5 sdm)" },
                    { img: "img/telur.png", alt: "Telur", text: "Telur 60 gr<br>(1 butir besar)" },
                    { img: "img/susu.png", alt: "Susu", text: "Susu 180-240 ml<br>(1â€“2 gelas)" }
                ],
                "2-5": [
                    { img: "img/dada-ayam.png", alt: "Ayam", text: "Ayam 80 gr<br>(setara 1 ptg ayam)" },
                    { img: "img/hati-ayam.png", alt: "Hati Ayam", text: "Hati Ayam 80 gr<br>(6 sdm penuh)" },
                    { img: "img/ikan.png", alt: "Ikan", text: "Ikan 60 gr<br>(6 sdm)" },
                    { img: "img/daging.png", alt: "Daging Sapi", text: "Daging Sapi 80 gr<br>(5-6 sdm penuh)" },
                    { img: "img/telur.png", alt: "Telur", text: "Telur 60 gr<br>(1 butir besar)" },
                    { img: "img/susu.png", alt: "Susu", text: "Susu 480-600 ml<br>(2â€“3 gelas)" }
                ]
            },
            "Karbohidrat": {
                "12-24": [
                    { img: "img/nasi.png", alt: "Nasi", text: "Nasi 60 gr<br>(3â€“4 sdm penuh)" },
                    { img: "img/jagung.png", alt: "Jagung", text: "Jagung 1/2<br>gelas kecil" },
                    { img: "img/roti.png", alt: "Roti Tawar", text: "Roti Tawar<br>1 lembar" },
                    { img: "img/ubi.png", alt: "Ubi Jalar", text: "Ubi Jalar 66 gr<br>(4â€“5 sdm)" },
                    { img: "img/kentang.png", alt: "Kentang", text: "Kentang 1<br>buah kecil" }
                ],
                "2-5": [
                    { img: "img/nasi.png", alt: "Nasi", text: "Nasi 125 gr<br>(7 sdm)" },
                    { img: "img/jagung.png", alt: "Jagung", text: "Jagung 1/4<br>(7 sdm)" },
                    { img: "img/roti.png", alt: "Roti Tawar", text: "Roti Tawar<br>1 lembar" },
                    { img: "img/ubi.png", alt: "Ubi Jalar", text: "Ubi Jalar 140 gr<br>(7â€“8 sdm)" },
                    { img: "img/kentang.png", alt: "Kentang", text: "Kentang 1<br>buah" }
                ]
            },
            "Lemak": {
                "12-24": [
                    { img: "img/keju.png", alt: "Keju", text: "Keju 1 sdm perhari" },
                    { img: "img/margarin.png", alt: "Margarin", text: "Margarin 1 sdt" },
                    { img: "img/minyak.png", alt: "Minyak", text: "Minyak 1 sdm" },
                    { img: "img/yoghurt.png", alt: "Yogurt", text: "Yogurt 1/2 cup kecil" }
                ],
                "2-5": [
                    { img: "img/keju.png", alt: "Keju", text: "1-2 porsi kecil" },
                    { img: "img/margarin.png", alt: "Margarin", text: "Margarin 1-2 sdt per hari" },
                    { img: "img/minyak.png", alt: "Minyak", text: "Minyak 1-2 sdm" },
                    { img: "img/yoghurt.png", alt: "Yogurt", text: "Yogurt 1 cup kecil" }
                ]
            },
            "Serat": {
                "12-24": [
                    { img: "img/pisang.png", alt: "Pisang", text: "Pisang 1<br>porsi perhari" },
                    { img: "img/pepaya.png", alt: "Pepaya", text: "Pepaya 1<br>potong kecil" },
                    { img: "img/apel.png", alt: "Apel", text: "Apel 1/2<br>di potong kecil-kecil" },
                    { img: "img/wortel.png", alt: "Wortel", text: "Wortel 2-3 sdm" },
                    { img: "img/brokoli.png", alt: "Brokoli", text: "Brokoli 1-2<br>kuntum kecil" },
                    { img: "img/bayam.png", alt: "Bayam", text: "Bayam 1<br>mangkuk kecil" }
                ],
                "2-5": [
                    { img: "img/pisang.png", alt: "Pisang", text: "Pisang 1<br>porsi perhari" },
                    { img: "img/pepaya.png", alt: "Pepaya", text: "Pepaya 1<br>potong ukuran sedang" },
                    { img: "img/apel.png", alt: "Apel", text: "Apel 1<br>buah" },
                    { img: "img/wortel.png", alt: "Wortel", text: "Wortel 3-4 sdm" },
                    { img: "img/brokoli.png", alt: "Brokoli", text: "Brokoli 2-3<br>kuntum kecil" },
                    { img: "img/bayam.png", alt: "Bayam", text: "Bayam 1<br>mangkuk kecil" }
                ]
            },
            "Cair": {
                "12-24": [
                    { img: "img/air.png", alt: "Air Minum", text: "240 - 960 ml<br>(setara 1â€“4 gelas)" }
                ],
                "2-5": [
                    { img: "img/air.png", alt: "Air Minum", text: "1300 ml<br>(setara 5 gelas)" }
                ]
            }
        };


        // Fungsi untuk merender daftar makanan
        function renderFoodItems(ageKey) {
            document.querySelectorAll('.food-section-card').forEach(card => {

                // Ambil nama kategori dari atribut 'alt'
                const headerElement = card.querySelector('.section-header');
                if (!headerElement) return;

                const header = headerElement.getAttribute('alt'); // Mengambil nilai 'alt' (misal: "Protein")

                const itemsData = dailyFoodItems[header] ? dailyFoodItems[header][ageKey] : [];

                const rowElement = card.querySelector('.row');
                if (!rowElement) return;

                let htmlContent = '';

                rowElement.classList.add('justify-content-center');

                // Jika usia dipilih, render item yang sesuai
                if (ageKey !== "default" && itemsData.length > 0) {

                    // Gunakan kelas Bootstrap yang lebih responsif
                    let colClass = 'col-6 col-sm-4 col-md-3 col-lg-2'; // Default untuk Protein, Karbohidrat, Serat
                    if (header === "Lemak") {
                        colClass = 'col-6 col-sm-4 col-md-4 col-lg-3';
                    } else if (header === "Cair") {
                        colClass = 'col-8 col-sm-6 col-md-4 col-lg-3'; // Lebih lebar karena hanya sedikit item
                    }

                    htmlContent = itemsData.map(item => `
                <div class="${colClass} food-item">
                    <img src="${item.img}" alt="${item.alt}">
                    <p>${item.text}</p>
                </div>
            `).join('');
                }

                // Ganti konten row
                rowElement.innerHTML = htmlContent;

                // Tampilkan/sembunyikan row
                if (ageKey === "default") {
                    rowElement.classList.add('d-none');
                } else {
                    rowElement.classList.remove('d-none');
                }
            });
        }

        function updatePlateVisual(ageKey) {
            const plateWrapper = document.getElementById("plateVisualWrapper");
            plateWrapper.innerHTML = '';

            let htmlContent = '';

            if (ageKey === "12-24") {
                htmlContent = `
            <div class="dual-plate-container">
                <img src="${plate12to24Img1}" class="plate-image mpasi-main" alt="Piring Bahan">
                <img src="${rightArrowImg}" class="plate-arrow" alt="Panah">
                <img src="${plate12to24Img2}" class="plate-image" alt="Piring Jadi">
            </div>
            <img src="${asiImg}" class="asi-image" alt="Informasi ASI">
        `;
            } else if (ageKey === "2-5") {
                htmlContent = `
            <div class="dual-plate-container">
                <img src="${plate2to5Img1}" class="plate-image mpasi-main" alt="Piring Bahan">
                <img src="${rightArrowImg}" class="plate-arrow" alt="Panah">
                <img src="${plate2to5Img2}" class="plate-image" alt="Piring Jadi">
            </div>
        `;
            } else {
                htmlContent = `<img src="${emptyPlateImg}" class="plate-composition-img" alt="Pilih Usia">`;
            }

            plateWrapper.innerHTML = htmlContent;
        }

        // Fungsi untuk mengganti teks kebutuhan harian & menampilkan/menyembunyikan kartu
        function updateDailyNeeds(ageKey) {
            const indicator = document.getElementById("usia-indicator");
            const dropdownBtn = document.getElementById("usiaDropdown");
            const categoriesContainer = document.getElementById("foodCategoriesContainer");

            // 1. Update Teks Indicator
            indicator.textContent = dailyNeeds[ageKey];
            dropdownBtn.textContent = (ageKey === "12-24") ? "Usia 12â€“23 Bulan" : (ageKey === "2-5" ? "Usia 2â€“5 Tahun" : "Pilih Usia");

            // 2. Tampilkan/Sembunyikan Kartu
            if (ageKey === "default") {
                categoriesContainer.classList.add('d-none'); // Sembunyikan semua kartu
            } else {
                categoriesContainer.classList.remove('d-none'); // Tampilkan semua kartu
            }

            // 3. Update Visual Piring
            updatePlateVisual(ageKey);

            // 4. Update Teks Kebutuhan Harian di setiap kartu (daily-need-bar)
            document.querySelectorAll('.food-section-card').forEach(card => {

                // Ambil nama kategori dari atribut 'alt'
                const headerElement = card.querySelector('.section-header');
                if (!headerElement) return;
                const header = headerElement.getAttribute('alt');

                const dailyBar = card.querySelector('.daily-need-bar');
                const category = header; // Gunakan nilai 'alt' sebagai category

                let needText = categoryNeeds[category] ? categoryNeeds[category][ageKey] : 'Kebutuhan Harian';

                if (ageKey === "default") {
                    // Teks awal saat reset
                    needText = 'Kebutuhan Harian Balita';
                }
                dailyBar.textContent = needText;
            });

            // 5. Update Daftar Makanan
            renderFoodItems(ageKey);
        }
        // Reset ke default
        function resetPlate() {
            updateDailyNeeds("default");
        }

        // --- Hook event dropdown items (delegate) ---
        document.addEventListener('DOMContentLoaded', function () {
            // attach listeners to items (using data-age attr)
            document.querySelectorAll('.dropdown-menu .dropdown-item[data-age]').forEach(el => {
                el.addEventListener('click', function (e) {
                    const age = e.currentTarget.getAttribute('data-age');

                    // close dropdown (Bootstrap)
                    const btn = document.getElementById('usiaDropdown');
                    const dropdown = bootstrap.Dropdown.getInstance(btn) || new bootstrap.Dropdown(btn);
                    dropdown.hide();

                    updateDailyNeeds(age);
                });
            });

            // reset button
            document.getElementById('resetPlateBtn').addEventListener('click', function () {
                const btn = document.getElementById('usiaDropdown');
                const dropdown = bootstrap.Dropdown.getInstance(btn) || new bootstrap.Dropdown(btn);
                dropdown.hide();
                resetPlate();
            });

            // Inisialisasi awal: pastikan dalam keadaan reset
            resetPlate();
        });
    </script>

</body>

</html>