<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz Edukasi - DJKN CARE</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        body {
            background-color: #badc84;
            min-height: 100vh;
        }

        .main-header {
            width: 100%;
            position: relative;
            z-index: 1000;
        }

        .main-header .navbar {
            width: 100%;
        }


        .quiz-container {
            max-width: 700px;
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            margin: auto;
            position: relative;
            margin-top: 80px;
        }

        .form-check-label {
            cursor: pointer;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 10px;
            border: 1px solid #dee2e6;
            transition: background-color 0.2s;
            display: block;
        }

        .form-check-input:checked+.form-check-label {
            background-color: #d1e7dd;
            border-color: #badc84;
        }

        .carousel-control-prev,
        .carousel-control-next {
            display: none !important;
        }
    </style>
</head>

<body>
    <header class="main-header">
        <nav class="navbar navbar-expand-lg navbar-light bg-light shadow-sm py-2">
            <div class="container d-flex align-items-center">

                <!-- Logo + Text Brand -->
                <div class="d-flex align-items-center">
                    <img src="img/logo-djkn.png" alt="DJKN CARE Logo" height="70" class="me-0"
                        style="margin-right: 6px;">

                    <span style="font-size: 1.7rem; font-weight: 700;">
                        <span style="color: #006838;">DJKN</span>
                        <span style="color: #8cc342;">-CARE</span>
                    </span>
                </div>

                <!-- Logo STIKES -->
                <img src="img/logo-stikes.png" alt="Logo STIKES" height="55" class="ms-auto">

            </div>
        </nav>
    </header>

    <div class="container">

        <div class="quiz-container mx-auto">
            <a href="home.html" class="btn btn-outline-secondary btn-sm mb-3">
                ‚Üê Back
            </a>

            <h2 class="text-center text-success mb-4">Uji Pengetahuan Anda!</h2>

            <p class="text-center text-muted mb-4">Soal <span id="current-question">1</span> dari 15</p>

            <div id="quiz-carousel" class="carousel slide" data-bs-interval="false">
                <div class="carousel-inner" id="quiz-questions-container"></div>

                <div id="quiz-navigation" class="text-center mt-5"></div>

                <div id="quiz-result" class="text-center mt-5" style="display:none;">
                    <h3>Hasil Quiz Anda</h3>
                    <p class="lead">
                        Skor Anda:
                        <span id="final-percentage-score" class="fw-bold fs-2 text-success"></span>
                    </p>
                    <p class="text-muted">
                        (<span id="correct-count"></span> jawaban benar dari 15 soal)
                    </p>
                    <p id="result-message"></p>

                    <button class="btn btn-outline-primary mt-3" onclick="window.location.href='home.html'">
                        Kembali ke Beranda
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        // ========================
        // DATA SOAL
        // ========================
        const questions = [
            { question: "Apa itu picky eater?", options: ["Anak yang suka pilih-pilih makanan", "Anak yang makan banyak", "Anak yang suka semua makanan"], answer: 1 },
            { question: "Ciri-ciri picky eater adalah", options: ["Mau mencoba semua makanan", "Hanya mau makan makanan tertentu", "Selalu makan tepat waktu"], answer: 2 },
            { question: "Salah satu penyebab utama stunting adalah...", options: ["Kurangnya tidur", "Kurangnya gizi pada 1000 hari pertama kehidupan", "Terlalu banyak bermain gadget", "Anak terlalu aktif"], answer: 1 },
            { question: "Apa yang dimaksud dengan Picky Eater?", options: ["Anak yang alergi makanan", "Anak yang sangat selektif memilih makanan", "Anak yang suka jajan", "Anak yang makan terlalu banyak"], answer: 1 },
            { question: "Manakah tips yang efektif untuk mengatasi Picky Eater?", options: ["Memaksa anak menghabiskan makanan", "Menyajikan makanan dengan porsi kecil dan menarik", "Memberikan makanan cepat saji", "Membiarkan anak makan sambil menonton TV"], answer: 1 },
            { question: "Mengapa peran orang tua sangat penting dalam pola makan anak?", options: ["Karena orang tua harus memasak setiap hari", "Karena orang tua adalah contoh yang ditiru anak", "Karena orang tua tahu semua jenis makanan", "Karena orang tua membayar makanan"], answer: 1 },
            { question: "Apa salah satu pilar utama pencegahan stunting selain Pola Makan dan Pola Asuh?", options: ["Edukasi", "Sanitasi dan Akses Air Bersih", "Hiburan", "Transportasi"], answer: 1 },
            { question: "Apa peran 'Pengaruh Prenatal' terhadap kebiasaan makan anak?", options: ["Ayah membeli makanan saat ibu hamil", "Pola makan ibu saat hamil memengaruhi pilihan makan anak", "Anak dapat makan sendiri sejak dalam kandungan", "Anak akan lahir dengan gigi lengkap"], answer: 1 },
            { question: "Apa manfaat dari mengikutsertakan anak dalam proses memasak?", options: ["Anak bisa jadi koki", "Meningkatkan nafsu makan dan kemauan mencoba makanan baru", "Menghemat waktu memasak", "Mengurangi biaya belanja"], answer: 1 },
            { question: "Apakah memaksa anak menghabiskan makanan merupakan langkah yang baik?", options: ["Ya, agar anak disiplin", "Tidak, karena dapat menciptakan trauma dan penolakan makanan", "Ya, hanya untuk sayuran", "Tergantung makanannya"], answer: 1 },
            { question: "Apa yang dimaksud dengan '1000 Hari Pertama Kehidupan'?", options: ["Masa anak mulai sekolah", "Masa kritis dari konsepsi hingga usia 2 tahun", "Masa anak mulai berjalan", "Masa anak mulai berbicara"], answer: 1 },
            { question: "Bagaimana memodifikasi makanan agar menarik?", options: ["Menyembunyikannya di makanan lain", "Memberikan saus instan", "Membuat bentuk lucu atau mencampurnya dalam puding", "Memberikannya dingin"], answer: 2 },
            { question: "Mengapa ASI eksklusif penting?", options: ["Lebih murah", "Mengandung gizi lengkap & antibodi", "Untuk bonding saja", "Agar anak cepat tidur"], answer: 1 },
            { question: "Apa fungsi Cek Status Gizi?", options: ["Mengetahui golongan darah", "Memantau perkembangan fisik & nutrisi anak", "Mengetahui hobi", "Mengetahui nilai rapor"], answer: 1 },
            { question: "Jika anak selalu menolak makanan baru, apa langkah terbaik?", options: ["Membiarkannya", "Menghukum", "Memaksa", "Konsultasi ke dokter anak / ahli gizi"], answer: 3 }
        ];

        let currentQuestionIndex = 0;
        const userAnswers = new Array(questions.length).fill(null);

        const quizCarousel = new bootstrap.Carousel(document.getElementById('quiz-carousel'), {
            interval: false,
            wrap: false
        });

        const quizContainer = document.getElementById('quiz-questions-container');
        const navContainer = document.getElementById('quiz-navigation');
        const resultSection = document.getElementById('quiz-result');
        const indicator = document.getElementById('current-question');

        window.handleAnswerChange = function (qIndex, answerValue) {
            userAnswers[qIndex] = answerValue;
            updateNavigation();
        };

        function renderQuestions() {
            quizContainer.innerHTML = '';

            questions.forEach((q, index) => {
                const item = document.createElement('div');
                item.className = 'carousel-item' + (index === 0 ? ' active' : '');
                item.dataset.questionIndex = index;

                let optionsHtml = '';

                q.options.forEach((option, optIndex) => {
                    const isChecked = userAnswers[index] === optIndex;

                    optionsHtml += `
                        <div class="form-check">
                            <input class="form-check-input" type="radio"
                                name="q${index}"
                                id="q${index}opt${optIndex}"
                                value="${optIndex}"
                                ${isChecked ? 'checked' : ''}
                                onchange="handleAnswerChange(${index}, ${optIndex})">

                            <label class="form-check-label" for="q${index}opt${optIndex}">
                                ${option}
                            </label>
                        </div>`;
                });

                item.innerHTML = `
                    <h5 class="mb-4">Soal ${index + 1}: ${q.question}</h5>
                    ${optionsHtml}
                `;

                quizContainer.appendChild(item);
            });

            updateNavigation();
        }

        function updateNavigation() {
            navContainer.innerHTML = '';

            const currentItem = document.querySelector('.carousel-item.active');
            currentQuestionIndex = currentItem ? parseInt(currentItem.dataset.questionIndex) : 0;

            indicator.textContent = currentQuestionIndex + 1;

            const isAnswered = userAnswers[currentQuestionIndex] !== null;

            // Tombol Sebelumnya
            if (currentQuestionIndex > 0) {
                const prevBtn = document.createElement('button');
                prevBtn.className = 'btn btn-outline-secondary me-3';
                prevBtn.textContent = 'Sebelumnya';
                prevBtn.onclick = () => quizCarousel.prev();
                navContainer.appendChild(prevBtn);
            }

            // Tombol Selanjutnya / Selesai
            const nextBtn = document.createElement('button');
            nextBtn.className = 'btn btn-primary';
            nextBtn.disabled = !isAnswered;

            if (currentQuestionIndex < questions.length - 1) {
                nextBtn.textContent = 'Selanjutnya';
                nextBtn.onclick = () => quizCarousel.next();
            } else {
                nextBtn.textContent = 'Selesai & Lihat Hasil';
                nextBtn.onclick = calculateScore;
            }

            navContainer.appendChild(nextBtn);
        }

        function calculateScore() {
            let correctCount = 0;

            questions.forEach((q, i) => {
                if (userAnswers[i] === q.answer) correctCount++;
            });

            const percentageScore = ((correctCount / questions.length) * 100).toFixed(0);

            document.getElementById('final-percentage-score').textContent = percentageScore + "%";
            document.getElementById('correct-count').textContent = correctCount;

            quizContainer.style.display = 'none';
            navContainer.style.display = 'none';
            document.querySelector('.quiz-container > p').style.display = 'none';
            resultSection.style.display = 'block';

            let msg = "";
            if (correctCount === questions.length) msg = "SEMPURNA! üéâ Anda benar-benar pakar gizi anak!";
            else if (correctCount >= 12) msg = "Luar biasa! Pengetahuan Anda sangat baik!";
            else if (correctCount >= 8) msg = "Bagus! Terus tingkatkan wawasan Anda!";
            else msg = "Jangan khawatir! Ini kesempatan untuk belajar lebih banyak!";

            document.getElementById('result-message').textContent = msg;
        }

        document.addEventListener('DOMContentLoaded', () => {
            renderQuestions();

            document.getElementById('quiz-carousel').addEventListener('slide.bs.carousel', (event) => {
                const newIndex = event.to;
                indicator.textContent = newIndex + 1;

                setTimeout(updateNavigation, 150);
            });
        });
    </script>
</body>

</html>